(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,r){e.exports={mark:"Cell_mark__10kVn",bounce:"Cell_bounce__2wI6L",disappear:"Cell_disappear__14dSm"}},29:function(e,t,r){e.exports=r(44)},34:function(e,t,r){},44:function(e,t,r){"use strict";r.r(t);for(var o=r(2),n=r.n(o),c=r(20),a=r.n(c),u=(r(34),r(21)),i=r(22),l=r(28),s=r(23),f=r(27),h=r(8),v=r(14),d="#cfcfcf",p=function(e){return n.a.createElement("div",{style:{width:"100%",backgroundColor:d,padding:"5px"}},"Score: ",e.score)},b=r(18),m=r.n(b),x=function(e){var t=e.data,r=e.mark,o=e.choose,c=e.target;return n.a.createElement("div",{onClick:t.color?void 0:c,style:{width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:d}},t.future&&n.a.createElement("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:t.future.color}}),t.color&&n.a.createElement("div",{onClick:o,className:(r?m.a.mark:"")+" "+(t.remove?m.a.disappear:""),style:{width:"30px",height:"30px",borderRadius:"50%",backgroundColor:t.color,position:"relative"}}))},g=function(e){var t=e.content,r=e.choose,o=e.target,c=e.chosen;return n.a.createElement("table",{style:{margin:"15px"}},n.a.createElement("tbody",null,t.map(function(e,a){return n.a.createElement("tr",{key:a},e.map(function(e,u){var i=u===c.x&&a===c.y;return n.a.createElement("td",{key:u},n.a.createElement(x,{data:e,target:function(){return o(c.x,c.y,u,a,t)},choose:function(){return r(u,a)},mark:i}))}))})))},y=["#f44336","#2196f3","#4caf50","#ffeb3b","#9c27b0","#795548","#00bcd4"],j=3,k=5,O=[],w=0;w<9;w++){for(var E=[],X=0;X<9;X++)E.push({});O.push(E)}var Y=r(6),C=r(26),I=r.n(C);function _(e){for(var t,r=0,o=e.length*e[0].length,n=0;n<e.length;n++)for(var c=0;c<e[0].length;c++){var a=e[n][c];(a.future||a.color)&&r++}if(r===o)return null;for(;;)for(var u=0;u<e.length;u++)for(var i=0;i<e[0].length;i++){var l=e[u][i];if(!l.future&&!l.color&&Math.random()<1/(o-r))return{x:i,y:u,color:y[(t=y.length,Math.floor(Math.random()*Math.floor(t)))]}}}function S(e){return e.map(function(e){return e.map(function(e){return Object(Y.a)({},e)})})}function G(e,t,r,o,n){var c=e+"-"+t,a=r+"-"+o,u={},i={},l={},s=new I.a({comparator:function(e,t){return e.d-t.d}});u[c]=0,s.queue({node:c,d:0}),n.forEach(function(r,o){r.forEach(function(r,n){o===t&&n===e||(u[n+"-"+o]=1/0)})});var f=function(){var e=s.dequeue().node;return i[e]?"continue":(i[e]=!0,e===a?"break":void function(e,t){var r=e.split("-"),o=parseInt(r[0],10),n=parseInt(r[1],10),c=[];if(o>0){var a=t[n][o-1];(void 0===a.color||a.future)&&c.push(o-1+"-"+n)}if(n>0){var u=t[n-1][o];(void 0===u.color||u.future)&&c.push(o+"-"+(n-1))}if(o<t[0].length-1){var i=t[n][o+1];(void 0===i.color||i.future)&&c.push(o+1+"-"+n)}if(n<t.length-1){var l=t[n+1][o];(void 0===l.color||l.future)&&c.push(o+"-"+(n+1))}return c}(e,n).forEach(function(t){if(void 0===i[t]){var r=u[e]+1;r<u[t]&&(u[t]=r,l[t]=e,s.queue({node:t,d:r}))}}))};e:for(;s.length>0;){switch(f()){case"continue":continue;case"break":break e}}if(void 0!==i[a]){var h=l[a],v=[];if(a===c)return v;for(v.push(a);h!==c;)v.push(h),h=l[h];return v.reverse()}}var R="newGame",B="choose",M="unchoose",q="target",D="move",F="relocateFuture",J="next",N="addFuture",W="markRemoveBalls",z="removeBalls";var A=function(e){function t(e){var r;return Object(u.a)(this,t),(r=Object(l.a)(this,Object(s.a)(t).call(this,e))).newGame=r.newGame.bind(Object(h.a)(Object(h.a)(r))),r.choose=r.choose.bind(Object(h.a)(Object(h.a)(r))),r.target=r.target.bind(Object(h.a)(Object(h.a)(r))),r}return Object(f.a)(t,e),Object(i.a)(t,[{key:"newGame",value:function(){for(var e=S(O),t=0;t<j;t++){var r=_(e),o=r.x,n=r.y,c=r.color;e[n][o].color=c}for(var a=0;a<j;a++){var u=_(e);o=u.x,n=u.y,c=u.color;e[n][o].future={color:c}}this.props.dispatch({type:R,content:e,count:j})}},{key:"choose",value:function(e,t){this.props.dispatch(function(e,t){return{type:B,x:e,y:t}}(e,t))}},{key:"target",value:function(e,t,r,o,n){this.props.dispatch(function(e,t,r,o,n){return{type:q,fromX:e,fromY:t,toX:r,toY:o,content:n}}(e,t,r,o,n))}},{key:"render",value:function(){var e=this.props,t=e.score,r=e.content,o=e.chosen;return n.a.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",flexDirection:"column"}},n.a.createElement("div",{style:{padding:"30px",borderRadius:"10px",backgroundColor:"white",display:"flex",flexDirection:"column",alignItems:"center"}},n.a.createElement("button",{style:{padding:"5px",borderRadius:"5px",fontSize:"17px"},onClick:this.newGame},"New game"),n.a.createElement("div",{style:{height:"10px"}}," "),n.a.createElement(p,{score:t})),n.a.createElement("div",{style:{boxShadow:"0 0 5px 2px ".concat(d)}},n.a.createElement(g,{content:r,choose:this.choose,target:this.target,chosen:o})))}}]),t}(o.Component);var L=Object(v.b)(function(e){return{score:e.score||0,content:e.content||O,chosen:{x:e.chosenX,y:e.chosenY}}})(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=r(13),$=function(e){var t=e.getState;e.dispatch;return function(e){return function(r){console.log("Action",r),e(r),console.log("State",t())}}},H=r(12),K=r(10),P=r.n(K),Q=r(4),T=P.a.mark(ee),U=P.a.mark(te),Z=P.a.mark(re);function ee(){var e,t,r,o,n,c,a,u,i,l,s;return P.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=3,Object(Q.d)(q);case 3:if(e=f.sent,t=G(e.fromX,e.fromY,e.toX,e.toY,e.content),r=e.fromX,o=e.fromY,void 0===t){f.next=49;break}n=0;case 9:if(!(n<t.length)){f.next=22;break}return c=t[n].split("-"),a=parseInt(c[0],10),u=parseInt(c[1],10),f.next=15,Object(Q.b)({type:D,fromX:r,fromY:o,toX:a,toY:u});case 15:return f.next=17,Object(H.b)(20);case 17:r=a,o=u;case 19:n++,f.next=9;break;case 22:return f.next=24,Object(Q.b)({type:M});case 24:return f.next=26,Object(Q.b)({type:F,fromX:e.fromX,fromY:e.fromY,x:e.toX,y:e.toY});case 26:return f.next=28,Object(Q.b)({type:J});case 28:return f.next=30,Object(H.b)(50);case 30:return f.next=32,Object(Q.b)({type:W});case 32:return f.next=34,Object(H.b)(100);case 34:return f.next=36,Object(Q.b)({type:z});case 36:i=0;case 37:if(!(i<j)){f.next=48;break}return f.next=40,Object(Q.c)(function(e){return e.content});case 40:if(l=f.sent,null===(s=_(l))){f.next=45;break}return f.next=45,Object(Q.b)({type:N,futures:[s]});case 45:i++,f.next=37;break;case 48:return f.abrupt("break",51);case 49:f.next=0;break;case 51:case"end":return f.stop()}},T,this)}function te(){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.e)(B,ee);case 2:case"end":return e.stop()}},U,this)}function re(){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.a)([te()]);case 2:case"end":return e.stop()}},Z,this)}var oe=Object(H.a)(),ne=Object(V.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return{content:t.content,count:t.count,score:0};case B:return Object(Y.a)({},e,{chosenX:t.x,chosenY:t.y});case M:return Object(Y.a)({},e,{chosenX:void 0,chosenY:void 0});case D:var r=S(e.content);return r[t.toY][t.toX].color=r[t.fromY][t.fromX].color,r[t.fromY][t.fromX].color=void 0,Object(Y.a)({},e,{content:r});case F:if(e.content[t.y][t.x].future){var o=S(e.content);return o[t.fromY][t.fromX].future=o[t.y][t.x].future,o[t.y][t.x].future=void 0,Object(Y.a)({},e,{content:o})}return e;case J:for(var n=e.count,c=S(e.content),a=0;a<c.length;a++)for(var u=0;u<c[0].length;u++){var i=c[a][u];i.future&&(i.color=i.future.color,i.future=void 0,n++)}return Object(Y.a)({},e,{count:n,content:c});case N:for(var l=S(e.content),s=0;s<t.futures.length;s++){var f=t.futures[s];l[f.y][f.x]={future:{color:f.color}}}return Object(Y.a)({},e,{content:l});case W:for(var h=e.content,v=S(e.content),d=e.count,p=e.score,b=0;b<h.length;b++)for(var m=1,x=1;x<h[0].length;x++)if(h[b][x].color&&h[b][x].color===h[b][x-1].color){if(++m>=k&&(x+1===h[0].length||h[b][x+1].color!==h[b][x].color))for(var g=0;g<m;g++)v[b][x-g].remove=!0,d--,p++}else m=1;for(var y=0;y<h[0].length;y++)for(var j=1,O=1;O<h.length;O++)if(h[O][y].color&&h[O][y].color===h[O-1][y].color){if(++j>=k&&(O+1===h.length||h[O+1][y].color!==h[O][y].color))for(var w=0;w<j;w++)v[O-w][y].remove=!0,d--,p++}else j=1;for(var E=[],X=0;X<h.length;X++)E.push({x:0,y:X});for(var C=1;C<h[0].length;C++)E.push({x:C,y:0});for(var I=0;I<E.length;I++)for(var _=E[I],G=1,q=1;_.x+q<h[0].length&&_.y+q<h.length;q++)if(h[_.y+q][_.x+q].color&&h[_.y+q][_.x+q].color===h[_.y+q-1][_.x+q-1].color){if(++G>=k&&(_.x+q+1===h[0].length||_.y+q+1===h.length||h[_.y+q][_.x+q].color!==h[_.y+q+1][_.x+q+1].color))for(var A=0;A<G;A++)v[_.y+q-A][_.x+q-A].remove=!0,d--,p++}else G=1;E=[];for(var L=0;L<h.length;L++)E.push({x:0,y:L});for(var V=1;V<h[0].length;V++)E.push({x:V,y:h[0].length-1});for(var $=0;$<E.length;$++)for(var H=E[$],K=1,P=1;H.x+P<h[0].length&&H.y-P>=0;P++)if(h[H.y-P][H.x+P].color&&h[H.y-P][H.x+P].color===h[H.y-P+1][H.x+P-1].color){if(++K>=k&&(H.x+P+1===h[0].length||H.y-P===0||h[H.y-P][H.x+P].color!==h[H.y-P-1][H.x+P+1].color))for(var Q=0;Q<K;Q++)v[H.y-P+Q][H.x+P-Q].remove=!0,d--,p++}else K=1;return Object(Y.a)({},e,{content:v,count:d,score:p});case z:var T=S(e.content);return T.forEach(function(e){e.forEach(function(e){e.remove&&(e.color=void 0,e.remove=void 0)})}),Object(Y.a)({},e,{content:T});default:return e}},{},Object(V.a)($,oe));oe.run(re),a.a.render(n.a.createElement(v.a,{store:ne},n.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,2,1]]]);
//# sourceMappingURL=main.84525db3.chunk.js.map